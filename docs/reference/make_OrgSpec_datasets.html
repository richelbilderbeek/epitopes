<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Build organism-specific data sets for training epitope prediction models — make_OrgSpec_datasets • epitopes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Build organism-specific data sets for training epitope prediction models — make_OrgSpec_datasets" />
<meta property="og:description" content="This function extracts organism or taxon-specific datasets from IEDB data
and returns data sets for the development and assessment of epitope
prediction models." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epitopes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Usage-example.html">Usage example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fcampelo/epitopes/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build organism-specific data sets for training epitope prediction models</h1>
    <small class="dont-index">Source: <a href='https://github.com/fcampelo/epitopes/blob/master/R/make_OrgSpec_datasets.R'><code>R/make_OrgSpec_datasets.R</code></a></small>
    <div class="hidden name"><code>make_OrgSpec_datasets.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function extracts organism or taxon-specific datasets from IEDB data
and returns data sets for the development and assessment of epitope
prediction models.</p>
    </div>

    <pre class="usage"><span class='fu'>make_OrgSpec_datasets</span><span class='op'>(</span>
  <span class='va'>epitopes</span>,
  <span class='va'>proteins</span>,
  <span class='va'>taxonomy_list</span>,
  orgIDs <span class='op'>=</span> <span class='cn'>NULL</span>,
  hostIDs <span class='op'>=</span> <span class='cn'>NULL</span>,
  removeIDs <span class='op'>=</span> <span class='cn'>NULL</span>,
  save_folder <span class='op'>=</span> <span class='st'>"./"</span>,
  min_epit <span class='op'>=</span> <span class='fl'>8</span>,
  max_epit <span class='op'>=</span> <span class='fl'>25</span>,
  only_exact <span class='op'>=</span> <span class='cn'>FALSE</span>,
  pos.mismatch.rm <span class='op'>=</span> <span class='st'>"all"</span>,
  set.positive <span class='op'>=</span> <span class='st'>"mode"</span>,
  window_size <span class='op'>=</span> <span class='fl'>2</span> <span class='op'>*</span> <span class='va'>min_epit</span> <span class='op'>-</span> <span class='fl'>1</span>,
  max.N <span class='op'>=</span> <span class='fl'>2</span>,
  split_level <span class='op'>=</span> <span class='st'>"prot"</span>,
  split_perc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>75</span>, <span class='fl'>25</span><span class='op'>)</span>,
  split_names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"01_training"</span>, <span class='st'>"02_holdout"</span><span class='op'>)</span>,
  coverage_threshold <span class='op'>=</span> <span class='fl'>80</span>,
  identity_threshold <span class='op'>=</span> <span class='fl'>80</span>,
  ncpus <span class='op'>=</span> <span class='fl'>1</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>epitopes</th>
      <td><p>data frame of epitope data (returned by <code><a href='get_LBCE.html'>get_LBCE()</a></code>).</p></td>
    </tr>
    <tr>
      <th>proteins</th>
      <td><p>data frame of protein data (returned by <code><a href='get_proteins.html'>get_proteins()</a></code>).</p></td>
    </tr>
    <tr>
      <th>taxonomy_list</th>
      <td><p>list containing taxonomy information
(generated by <code><a href='get_taxonomy.html'>get_taxonomy()</a></code>)</p></td>
    </tr>
    <tr>
      <th>orgIDs</th>
      <td><p>vector of organism/taxon IDs to retain (see
<code><a href='filter_epitopes.html'>filter_epitopes()</a></code>). If <code>NULL</code> then no organism ID  filtering is
performed.</p></td>
    </tr>
    <tr>
      <th>hostIDs</th>
      <td><p>vector of host IDs to retain  (see <code><a href='filter_epitopes.html'>filter_epitopes()</a></code>).
If <code>NULL</code> then no host filtering is performed.</p></td>
    </tr>
    <tr>
      <th>removeIDs</th>
      <td><p>vector of organism IDs to remove (see <code><a href='filter_epitopes.html'>filter_epitopes()</a></code>).
Useful for, e.g., using a Class-level <code>orgIDs</code> and removing some species
or genera. If <code>NULL</code> then no removal is performed.</p></td>
    </tr>
    <tr>
      <th>save_folder</th>
      <td><p>path to folder for saving the results.</p></td>
    </tr>
    <tr>
      <th>min_epit</th>
      <td><p>positive integer, shortest epitope to be considered</p></td>
    </tr>
    <tr>
      <th>max_epit</th>
      <td><p>positive integer, longest epitope to be considered</p></td>
    </tr>
    <tr>
      <th>only_exact</th>
      <td><p>logical, should only sequences labelled as "Exact Epitope"
in variable <em>epit_struc_def</em> (within <code>epitopes</code>) be considered?</p></td>
    </tr>
    <tr>
      <th>pos.mismatch.rm</th>
      <td><p>should epitopes with position mismatches be removed?
Use "all" (default) for removing any position mismatch or "align"
if the routine should attempt to
search the epitope sequence in the protein sequence.</p></td>
    </tr>
    <tr>
      <th>set.positive</th>
      <td><p>how to decide whether an observation should be of the
"Positive" (+1) class? Use "any" to set a sequence as positive if
$n_positive &gt; 0$, "mode" to set it if $n_positive &gt;= n_negative$,
or "all" to set it if $n_negative == 0$. Defaults to "mode".</p></td>
    </tr>
    <tr>
      <th>window_size</th>
      <td><p>positive integer, size of window to use.</p></td>
    </tr>
    <tr>
      <th>max.N</th>
      <td><p>maximum length of N-peptide frequency features to be calculated.</p></td>
    </tr>
    <tr>
      <th>split_level</th>
      <td><p>which level should be used for splitting? Use "org" for
splitting by source organism ID, "prot" by protein ID or "epit" by
epitope ID. When "prot" is used the routine attempts to identify
different protein versions and treat them as a single unit for
splitting purposes.</p></td>
    </tr>
    <tr>
      <th>split_perc</th>
      <td><p>numeric vector of desired splitting percentages. See
Details.</p></td>
    </tr>
    <tr>
      <th>split_names</th>
      <td><p>optional character vector with short names for each split.</p></td>
    </tr>
    <tr>
      <th>coverage_threshold</th>
      <td><p>coverage threshold for grouping proteins by
similarity, see Details.</p></td>
    </tr>
    <tr>
      <th>identity_threshold</th>
      <td><p>identity threshold for grouping proteins by
similarity, see Details.</p></td>
    </tr>
    <tr>
      <th>ncpus</th>
      <td><p>number of cores to use for data windowing and feature
calculation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List containing the resulting datasets.</p>
    <h2 class="hasAnchor" id="data-splitting-and-blast-requirements"><a class="anchor" href="#data-splitting-and-blast-requirements"></a>Data splitting and BLAST requirements</h2>

    

<p>If the sum of <code>split_perc</code> is less than 100 an extra split is generated
with the remaining observations - e.g., <code>split_perc = c(50, 30)</code> results in
three sets with an approximately 50/30/20% split <em>of the total observations.</em>
If the sum is greater than 100 the splits are linearly scaled down so that
the sum becomes 100. Note that the split percents correspond to the number of
observations, not the number of unique IDs.</p>
<p>This function will attempt to approximate the desired split levels, but
depending on the size of the data set and the desired <code>split_level</code> it may
not be possible (e.g., if <code>split_level = "org"</code> and a single organism
corresponds to 90% of the data, one of the splits will necessarily correspond
to at least 90% of the data, regardless of the values informed in
<code>split_perc</code>).</p>
<p>If <code>split_level == "prot</code> the routine will keep any pairs of proteins
having (coverage &gt;= <code>coverage_threshold</code> AND
identity &gt;=  <code>identity_threshold</code>) under the same split. This is useful to
prevent accidental data leakage due to quasi-identical proteins with
different UIDs.
<strong>NOTE</strong>: this will require BLAST+ to be installed in your
local machine. For details on how to set up BLAST+ on your machine, check
<a href='https://blast.ncbi.nlm.nih.gov/Blast.cgi?PAGE_TYPE=BlastDocs&amp;DOC_TYPE=Download'>https://blast.ncbi.nlm.nih.gov/Blast.cgi?PAGE_TYPE=BlastDocs&amp;DOC_TYPE=Download</a>.
This function was developed using package <code>blast 2.10.0</code>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Felipe Campelo (<a href='mailto:f.campelo@aston.ac.uk'>f.campelo@aston.ac.uk</a>)</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Felipe Campelo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


