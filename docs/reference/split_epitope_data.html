<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Split epitope data based on epitope, protein or organism IDs. — split_epitope_data • epitopes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Split epitope data based on epitope, protein or organism IDs. — split_epitope_data" />
<meta property="og:description" content="Takes a data.table of data of class windowed_epit_dt (returned by
make_window_df()) and split it into mutually exclusive sets of
observations, based on columns Info_sourceOrg_id, Info_protein_id or
Info_epitope_id." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epitopes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Usage-example.html">Usage example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fcampelo/epitopes/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Split epitope data based on epitope, protein or organism IDs.</h1>
    <small class="dont-index">Source: <a href='https://github.com/fcampelo/epitopes/blob/master/R/split_epitope_data.R'><code>R/split_epitope_data.R</code></a></small>
    <div class="hidden name"><code>split_epitope_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Takes a data.table of data of class <em>windowed_epit_dt</em> (returned by
<code><a href='make_window_df.html'>make_window_df()</a></code>) and split it into mutually exclusive sets of
observations, based on columns <em>Info_sourceOrg_id</em>, <em>Info_protein_id</em> or
<em>Info_epitope_id</em>.</p>
    </div>

    <pre class="usage"><span class='fu'>split_epitope_data</span><span class='op'>(</span>
  <span class='va'>wdf</span>,
  split_level <span class='op'>=</span> <span class='st'>"prot"</span>,
  split_perc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>70</span>, <span class='fl'>30</span><span class='op'>)</span>,
  split_names <span class='op'>=</span> <span class='cn'>NULL</span>,
  save_folder <span class='op'>=</span> <span class='cn'>NULL</span>,
  blast_file <span class='op'>=</span> <span class='cn'>NULL</span>,
  coverage_threshold <span class='op'>=</span> <span class='fl'>80</span>,
  identity_threshold <span class='op'>=</span> <span class='fl'>80</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>wdf</th>
      <td><p>data table of class <em>windowed_epit_dt</em> (returned by
<code><a href='make_window_df.html'>make_window_df()</a></code>)</p></td>
    </tr>
    <tr>
      <th>split_level</th>
      <td><p>which level should be used for splitting? Use "org" for
splitting by source organism ID, "prot" by protein ID or "epit" by
epitope ID. When "prot" is used the routine attempts to identify
different protein versions and treat them as a single unit for
splitting purposes.</p></td>
    </tr>
    <tr>
      <th>split_perc</th>
      <td><p>numeric vector of desired splitting percentages. See
Details.</p></td>
    </tr>
    <tr>
      <th>split_names</th>
      <td><p>optional character vector with short names for each split.</p></td>
    </tr>
    <tr>
      <th>save_folder</th>
      <td><p>path to folder for saving the results.</p></td>
    </tr>
    <tr>
      <th>blast_file</th>
      <td><p>path to file containing all-vs-all BLASTp alignment results
for all proteins in <strong>wdf</strong>. See Details.</p></td>
    </tr>
    <tr>
      <th>coverage_threshold</th>
      <td><p>coverage threshold for grouping proteins by
similarity, see Details.</p></td>
    </tr>
    <tr>
      <th>identity_threshold</th>
      <td><p>identity threshold for grouping proteins by
similarity, see Details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list object containing the split data tables.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If the sum of <strong>split_perc</strong> is less than 100 an extra split is generated
with the remaining observations - e.g., <code>split_perc = c(50, 30)</code> results in
three sets with an approximately 50/30/20% split <em>of the total observations.</em>
If the sum is greater than 100 the splits are linearly scaled down so that
the sum becomes 100. Note that the split percents correspond to the number of
observations, not the number of unique IDs.</p>
<p>This function will attempt to approximate the desired split levels, but
depending on the size of <strong>wdf</strong> set and the desired <strong>split_level</strong> it may
not be possible (e.g., if <code>split_level = "org"</code> and a single organism
corresponds to 90% of the data, one of the splits will necessarily correspond
to at least 90% of the data, regardless of the values informed in
<code>split_perc</code>.</p>
<p>If a BLASTp file is provided the routine will keep any pairs of proteins
having (coverage &gt;= <strong>coverage_threshold</strong> AND
identity &gt;=  <strong>identity_threshold</strong>) under the same split. This is useful to
prevent accidental data leakage due to quasi-identical proteins with
different UIDs. <strong>NOTE</strong>: this only works if <code>split_level == "prot</code>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Felipe Campelo (<a href='mailto:f.campelo@aston.ac.uk'>f.campelo@aston.ac.uk</a>)</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Felipe Campelo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


